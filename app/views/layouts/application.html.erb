<!DOCTYPE html>
<html>
<head>
	<meta name="viewport"
	content="width=device-width,initial-scale=1,maximum-scale=1">
  <title>ST Mary Rehab Church</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag :modernizr %>
  <%= csrf_meta_tags %>

  <script>


  $(document).ready(function(){
      
      var autocom = [];
      $.ajax({
              url: $("#tokenfield-typeahead").attr('linktotags'),
              dataType: "json",
              success: function( data ) {
                autocom = data;
              }
            });

      $('#tokenfield-typeahead').tokenfield({
        autocomplete:
              { minLength: 2,   
                source: function(request, response) {
                  var value = request.term.toLowerCase();
                  var result = [];
                  for(var i = 0; i < autocom.length; i++)
                  {
                    if( autocom[i].search(value) > -1)
                    {
                      result.push(autocom[i]);
                    }
                  }
                  response(result);
                } 
              },showAutocompleteOnFocus: true
        });


      $('#tokenfield-typeahead').on('tokenfield:createtoken', function (event) {

          var existingTokens = $(this).tokenfield('getTokens');
          $.each(existingTokens, function(index, token) {
            if (token.value === event.attrs.value)
              event.preventDefault();
          });

          var exists = true;
          $.each(autocom, function(index, token) {
            if (token === event.attrs.value)
              exists = false;
          });
          if(exists === true)
            event.preventDefault();

        });

    });

  </script>
</head>
<body>

	<%= render partial: 'layouts/navbar'%>
	<div class="row">
		<div class="col-md-1"></div>
		<div class="col-md-10" >
					<% unless notice == nil %>
					<div class='panel panel-info'><div class='panel-heading'><div class='panel-title' ><%= notice %></div></div></div>
					<% end %>
					<% unless alert == nil %>
					<div class='panel panel-danger'><div class='panel-heading'><div class='panel-title'><%= alert %></div></div></div>
					<% end %>
		</div>
		<div class="col-md-1"></div>
	</div>
	
	<div class="container">
		<div class="row">

			<div class="col-md-2">
				<div>
						Borrowing Rules:
						<br>
						1
						<br>
						2
						<br>
						3
						<br>
						4
						<br>
						5
						<br>
						6
						<br>
						7
						<br>
						<br>
						<br>
						<br>
				</div>
			</div>

			<div class="col-md-9">

					<div id="msgmodal"></div>

					<%= yield %>

			</div>
			

			
		</div>
	</div>
	
</body>
</html>
